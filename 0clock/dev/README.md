Definitely tak a look at the following library to save yourself some time:

https://github.com/puranjaymohan/AVRLIB

